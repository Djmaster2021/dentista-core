{% extends "base_auth.html" %}
{% load static socialaccount widget_tweaks %}

{% block title %}Iniciar sesión | Dentyx{% endblock %}

{% block card_header %}
  <div class="d-flex align-items-start justify-content-between mb-4">
    <div>
      <h1 class="h3 fw-bold mb-1">Acceso del dentista</h1>
      <p class="text-secondary small mb-0">Usa tu email o usuario y tu contraseña para continuar.</p>
    </div>
    <img src="{% static 'img/logo-dentyx.svg' %}" alt="Dentyx" class="ms-3" style="height:32px">
  </div>
{% endblock %}

{% block content %}
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} mb-4" role="alert">{{ message }}</div>
    {% endfor %}
  {% endif %}

  {% if form.non_field_errors %}
    <div class="alert alert-danger mb-4" role="alert">
      {{ form.non_field_errors }}
    </div>
  {% endif %}

  <form method="post" action="{% url 'accounts:login' %}" class="vstack gap-3" novalidate>
    {% csrf_token %}

    <div>
      <label class="form-label" for="{{ form.username.id_for_label }}">Email o usuario</label>
      {{ form.username|add_class:"form-control form-control-lg"|attr:"placeholder:tu@correo.com,autocomplete:username" }}
      {% if form.username.errors %}
        <div class="invalid-feedback d-block">{{ form.username.errors.0 }}</div>
      {% endif %}
    </div>

    <div>
      <div class="d-flex justify-content-between align-items-center">
        <label class="form-label mb-0" for="{{ form.password.id_for_label }}">Contraseña</label>
        <a href="{% url 'accounts:password_reset' %}" class="link-secondary small">¿Olvidaste tu contraseña?</a>
      </div>
      {{ form.password|add_class:"form-control form-control-lg"|attr:"placeholder:••••••••,autocomplete:current-password" }}
      {% if form.password.errors %}
        <div class="invalid-feedback d-block">{{ form.password.errors.0 }}</div>
      {% endif %}
    </div>

    <div class="d-flex justify-content-between align-items-center">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="1" id="remember" name="remember">
        <label class="form-check-label small" for="remember">Recordarme</label>
      </div>
      <a href="{% url 'accounts:register' %}" class="small">Registrar dentista</a>
    </div>

    <button class="btn btn-primary btn-lg w-100 mt-1" type="submit">Entrar</button>

    <div class="text-center text-secondary my-2">
      <span class="divider-text small">o continúa con</span>
    </div>

    <div class="d-grid gap-2">
      <a href="{% provider_login_url 'google' %}" class="btn btn-outline-light btn-lg d-flex align-items-center justify-content-center">
        <img src="{% static 'img/icons/google.svg' %}" alt="" class="me-2" style="height:18px"> Ingresar con Google
      </a>
      <a href="{% provider_login_url 'facebook' %}" class="btn btn-outline-light btn-lg d-flex align-items-center justify-content-center">
        <img src="{% static 'img/icons/facebook.svg' %}" alt="" class="me-2" style="height:18px"> Ingresar con Facebook
      </a>
    </div>
  </form>
{% endblock %}

{% block below_card %}
  <p class="text-center text-secondary small mt-3">© {% now "Y" %} Dentyx</p>
{% endblock %}
